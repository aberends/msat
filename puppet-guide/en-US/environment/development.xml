<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "puppet-guide.ent">
%BOOK_ENTITIES;
]>
<section id="environment-development">
  <title>Development environment</title>

  <table id="environment-development-time">
    <title>Time needed</title>
    <tgroup align="left" cols="2" colsep="1" rowsep="1">
      <colspec colname="c1" colnum="1" colwidth="1*"></colspec>
      <colspec colname="c2" colnum="2" colwidth="1*"></colspec>
      <thead valign="top">
        <row>
          <entry>action</entry>
          <entry>time</entry>
        </row>
      </thead>
      <tbody valign="top">
        <row>
          <entry>Analysis of CentOS 6.5 channel</entry>
          <entry>120 minutes</entry>
        </row>
      </tbody>
    </tgroup>
  </table>

  <para>
    In this section we discuss how we setup a basic Linux
    node that we use to develop our puppet code and
    configuration on. After we have created the bare Linux
    node, as is shown in <xref
    linkend="software-test-bare"/>, we want to install a
    number of RPM packages and setup some configuration. We
    need the following items:
    <itemizedlist>
      <listitem>
        <para>
          <package>vim-enhanced</package>
        </para>
      </listitem>
      <listitem>
        <para>
          <package>rsync</package>
        </para>
      </listitem>
      <listitem>
        <para>
          <package>puppet</package>
        </para>
      </listitem>
      <listitem>
        <para>
          <package>tree</package>
        </para>
      </listitem>
      <listitem>
        <para>
          <package>man</package>
        </para>
      </listitem>
      <listitem>
        <para>
          <package>mlocate</package>
        </para>
      </listitem>
      <listitem>
        <para>
          Public SSH key of our host in the
          <filename>~/.ssh/authorized_keys</filename> of the
          bare Linux node.
        </para>
      </listitem>
      <listitem>
        <para>
          The <application>vim</application> configuration
          of our host in <filename
          class="directory">~/.vim/</filename>.
        </para>
      </listitem>
    </itemizedlist>
  </para>

  <para>
    The RPM packages can be installed with:
<screen>
&t1p; <userinput>yum install vim-enhanced rsync puppet tree man mlocate</userinput>  
.. output skipped ..
</screen>
  </para>

  <para>
    The public SSH key of our host is copied with:
<screen>
&hostp; <userinput>ssh-copy-id root@192.168.5.14</userinput>
/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed
/usr/bin/ssh-copy-id: INFO: 2 key(s) remain to be installed -- if you are prompted now it is to install the new keys
Warning: Permanently added '192.168.5.14' (RSA) to the list of known hosts.
root@192.168.5.14's password: <userinput>redhat</userinput>

Number of key(s) added: 2

Now try logging into the machine, with:   "ssh 'root@192.168.5.14'"
and check to make sure that only the key(s) you wanted were added.
</screen>
  </para>

  <para>
    All the custom vim settings on our host are copied to
    the Puppet development machine with:
<screen>
&hostp; <userinput>rsync -au ~/.vim root@192.168.5.14:</userinput>
</screen>
  </para>

  <para>
    Since this is our Puppet development node, we want to
    enrich it with some aliases to speed up our workflow:
<screen>
&t1p; <userinput>cat ~/.bashrc</userinput>
# .bashrc

# User specific aliases and functions

# Source global definitions
if [ -f /etc/bashrc ]; then
        . /etc/bashrc
fi

# Path aliases.
alias hier='cd /var/lib/hiera'
alias ipt='cd /etc/puppet/modules/iptables/manifests'
alias ldap='cd /etc/puppet/modules/ldap/manifests'
alias mod='cd /etc/puppet/modules'
</screen>
  </para>

</section>
